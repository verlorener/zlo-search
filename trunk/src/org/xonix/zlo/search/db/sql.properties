
sql.insert.msg=\
  INSERT INTO messages(\
  num,\
  parentNum,\
  host,\
  topicCode,\
  title,\
  nick,\
  altName,\
  msgDate,\
  reg,\
  body,\
  status)\
   VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);

sql.insert.update.msg=\
  INSERT INTO messages(\
  num,\
  parentNum,\
  host,\
  topicCode,\
  title,\
  nick,\
  altName,\
  msgDate,\
  reg,\
  body,\
  status)\
   VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) \
   ON DUPLICATE KEY UPDATE \
  parentNum=?,\
  host=?,\
  topicCode=?,\
  title=?,\
  nick=?,\
  altName=?,\
  msgDate=?,\
  reg=?,\
  body=?,\
  status=?;

sql.update.msg=\
  UPDATE messages \
  SET \
  num=?,\
  parentNum=?,\
  host=?,\
  topicCode=?,\
  title=?,\
  nick=?,\
  altName=?,\
  msgDate=?,\
  reg=?,\
  body=?,\
  status=? WHERE num=?;

sql.delete.msg=\
  DELETE FROM messages \
  WHERE num=?

sql.select.msg.by.id=\
  SELECT \
  num,\
  parentNum,\
  host,\
  topicCode,\
  title,\
  nick,\
  altName,\
  msgDate,\
  reg,\
  body,\
  status,\
  t.name as topic \
  FROM messages m \
  JOIN topics t ON m.topicCode=t.id \
  WHERE num=?

sql.select.msg.in.range=\
  SELECT \
  num,\
  parentNum,\
  host,\
  topicCode,\
  title,\
  nick,\
  altName,\
  msgDate,\
  reg,\
  body,\
  status,\
  t.name as topic \
  FROM messages m \
  JOIN topics t ON m.topicCode=t.id \
  WHERE num>=? AND num<?

sql.select.last.msg.num=\
  SELECT MAX(num) \
  FROM messages

sql.select.set=\
  SELECT \
  num,\
  parentNum,\
  host,\
  topicCode,\
  title,\
  nick,\
  altName,\
  msgDate,\
  reg,\
  body,\
  status,\
  t.name as topic \
  FROM messages m \
  JOIN topics t ON m.topicCode=t.id \
  WHERE num in (%1s) ORDER BY msgDate DESC

sql.select.topics=\
  SELECT id, name FROM topics

sql.log.request=\
  INSERT INTO request_log \
  (host,\
  user_agent,\
  req_text,\
  req_query,\
  referer,\
  req_date)\
  VALUES\
  (?, ?, ?, ?, ?, NOW())
